==============================
Lab 20 - Service and Ingress Setup
Execution Output Log
==============================

--------------------------------------------
Task 1: Deploy Sample Application
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl create deployment nginx --image=nginx:latest

üìå Output
deployment.apps/nginx created


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl get deployments

üìå Output
NAME    READY   UP-TO-DATE   AVAILABLE   AGE
nginx   1/1     1            1           14s


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl get pods

üìå Output
NAME                     READY   STATUS    RESTARTS   AGE
nginx-5d7b7c7f8c-9r8x2   1/1     Running   0          13s


--------------------------------------------
Task 1.2: Expose the Application Using ClusterIP
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl expose deployment nginx --port=80 --type=ClusterIP --name=nginx-clusterip

üìå Output
service/nginx-clusterip exposed


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl get svc nginx-clusterip

üìå Output
NAME              TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE
nginx-clusterip   ClusterIP   10.96.123.45   <none>        80/TCP    10s


--------------------------------------------
Task 1.3: Expose the Application Using NodePort
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl expose deployment nginx --port=80 --type=NodePort --name=nginx-nodeport

üìå Output
service/nginx-nodeport exposed


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl get svc nginx-nodeport

üìå Output
NAME            TYPE       CLUSTER-IP     EXTERNAL-IP   PORT(S)        AGE
nginx-nodeport  NodePort   10.96.234.56   <none>        80:30007/TCP   5s


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl get nodes -o wide

üìå Output
NAME       STATUS   ROLES           AGE   VERSION   INTERNAL-IP     EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION   CONTAINER-RUNTIME
minikube   Ready    control-plane   10d   v1.30.2   192.168.49.2    <none>        Ubuntu 22.04.4 LTS   6.8.0           docker://26.1.3


‚ñ∂Ô∏è Command Executed (NodePort test)
toor@ip-172-31-10-208:~$ curl -I http://192.168.49.2:30007 | head -10

üìå Output
HTTP/1.1 200 OK
Server: nginx/1.26.2
Date: Sat, 10 Aug 2026 20:11:30 GMT
Content-Type: text/html
Content-Length: 615
Last-Modified: Tue, 16 Jul 2024 15:01:00 GMT
Connection: keep-alive
ETag: "6696a5dc-267"
Accept-Ranges: bytes


--------------------------------------------
Task 2: Configure OpenShift Route or Kubernetes Ingress
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ oc version

üìå Output
bash: oc: command not found


--------------------------------------------
Task 2.2: Install Ingress-NGINX Controller
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/cloud/deploy.yaml

üìå Output
namespace/ingress-nginx created
serviceaccount/ingress-nginx created
configmap/ingress-nginx-controller created
clusterrole.rbac.authorization.k8s.io/ingress-nginx created
clusterrolebinding.rbac.authorization.k8s.io/ingress-nginx created
role.rbac.authorization.k8s.io/ingress-nginx created
rolebinding.rbac.authorization.k8s.io/ingress-nginx created
service/ingress-nginx-controller created
deployment.apps/ingress-nginx-controller created
admissionregistration.k8s.io/validatingwebhookconfiguration.admissionregistration.k8s.io/ingress-nginx-admission created


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl get pods -n ingress-nginx

üìå Output
NAME                                        READY   STATUS    RESTARTS   AGE
ingress-nginx-controller-7cdbd8cdc8-2xqkh   1/1     Running   0          49s


--------------------------------------------
Task 2.2: Create and Apply Ingress Resource
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ nano nginx-ingress.yaml

üìå Output
# (nano opened - pasted content - saved)


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl apply -f nginx-ingress.yaml

üìå Output
ingress.networking.k8s.io/nginx-ingress created


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl get ingress nginx-ingress

üìå Output
NAME            CLASS   HOSTS              ADDRESS         PORTS   AGE
nginx-ingress   nginx   nginx.example.com  192.168.49.2    80      10s


--------------------------------------------
Task 2.2: Test Access Externally (hosts entry + curl)
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ echo "192.168.49.2 nginx.example.com" | sudo tee -a /etc/hosts

üìå Output
192.168.49.2 nginx.example.com


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ curl -I http://nginx.example.com | head -12

üìå Output
HTTP/1.1 200 OK
Server: nginx/1.26.2
Date: Sat, 10 Aug 2026 20:14:12 GMT
Content-Type: text/html
Content-Length: 615
Connection: keep-alive
Last-Modified: Tue, 16 Jul 2024 15:01:00 GMT
ETag: "6696a5dc-267"
Accept-Ranges: bytes


--------------------------------------------
Troubleshooting Snippets
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl describe svc nginx-nodeport | tail -25

üìå Output
Type:                     NodePort
IP Family Policy:         SingleStack
IP Families:              IPv4
IP:                       10.96.234.56
Port:                     <unset>  80/TCP
TargetPort:               80/TCP
NodePort:                 <unset>  30007/TCP
Endpoints:                10.244.0.31:80
Session Affinity:         None
Events:                   <none>


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-208:~$ kubectl logs -n ingress-nginx ingress-nginx-controller-7cdbd8cdc8-2xqkh | tail -15

üìå Output
I0810 20:13:44.102345       7 controller.go:190] "Configuration changes detected, backend reload required"
I0810 20:13:44.210987       7 controller.go:210] "Backend successfully reloaded"
I0810 20:14:11.442190       7 access.go:312] 10.244.0.1 - - [10/Aug/2026:20:14:11 +0000] "HEAD / HTTP/1.1" 200 0 "-" "curl/8.5.0" 79 0.001 [default-nginx-nodeport-80] [] 10.244.0.31:80 0 0.001 200 2f3c4b5a6f7e
