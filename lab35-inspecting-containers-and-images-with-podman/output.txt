=============================
Lab 35 - Inspecting Containers and Images with Podman
Execution Output Log
=============================

----------------------------------------
Lab Setup
----------------------------------------

$ sudo dnf install -y podman
sudo: dnf: command not found


$ sudo yum install -y podman
Loaded plugins: fastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * base: mirror.centos.org
 * extras: mirror.centos.org
 * updates: mirror.centos.org
Package podman-3.4.4-1.el7.x86_64 already installed and latest version
Nothing to do


$ podman --version
podman version 3.4.4


$ podman pull docker.io/library/nginx:alpine
Trying to pull docker.io/library/nginx:alpine...
Getting image source signatures
Copying blob 44cf07d57ee4 done
Copying blob 7a6b5c4d3e2f done
Copying blob 9d1e2f3a4b5c done
Copying config a1b2c3d4e5f6 done
Writing manifest to image destination
Storing signatures
a1b2c3d4e5f60718293a4b5c6d7e8f90123456789abcdef0123456789abcdef01


----------------------------------------
Task 1 - Inspecting Container and Image Metadata
----------------------------------------

$ podman run -d --name my_nginx -p 8080:80 nginx:alpine
b2c3d4e5f60718293a4b5c6d7e8f90123456789abcdef0123456789abcdef012


$ podman inspect my_nginx | head -n 30
[
  {
    "Id": "b2c3d4e5f60718293a4b5c6d7e8f90123456789abcdef0123456789abcdef012",
    "Created": "2026-02-25T08:40:21.125462973Z",
    "Path": "/docker-entrypoint.sh",
    "Args": [
      "nginx",
      "-g",
      "daemon off;"
    ],
    "State": {
      "OciVersion": "1.0.2-dev",
      "Status": "running",
      "Running": true,
      "Paused": false,
      "Restarting": false,
      "OOMKilled": false,
      "Dead": false,
      "Pid": 3552,
      "ExitCode": 0,
      "Error": "",
      "StartedAt": "2026-02-25T08:40:22.012345678Z",
      "FinishedAt": "0001-01-01T00:00:00Z"
    },
    "ImageName": "docker.io/library/nginx:alpine",
    "Rootfs": {
      "Type": "overlay",
      "Layers": [
        "sha256:44cf07d57ee4...",
        "sha256:7a6b5c4d3e2f...",
        "sha256:9d1e2f3a4b5c..."
      ]
    },


$ podman inspect nginx:alpine | head -n 30
[
  {
    "Id": "a1b2c3d4e5f60718293a4b5c6d7e8f90123456789abcdef0123456789abcdef01",
    "Digest": "sha256:9f8e7d6c5b4a3a2b1c0d9e8f7a6b5c4d3e2f1a0b9c8d7e6f5a4b3c2d1e0f9a8b",
    "RepoTags": [
      "docker.io/library/nginx:alpine"
    ],
    "Created": "2025-12-10T10:44:11.000Z",
    "Architecture": "amd64",
    "Os": "linux",
    "Config": {
      "Env": [
        "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
        "NGINX_VERSION=1.26.1",
        "NJS_VERSION=0.8.6"
      ],
      "Cmd": [
        "nginx",
        "-g",
        "daemon off;"
      ]
    }
  }
]


$ podman inspect my_nginx --format '{{.NetworkSettings.IPAddress}}'
10.88.0.12


$ podman inspect my_nginx --format '{{.Created}}'
2026-02-25T08:40:21.125462973Z


----------------------------------------
Task 2 - Extracting Environment Variables
----------------------------------------

$ podman run -d --name env_test -e APP_COLOR=blue -e APP_MODE=prod nginx:alpine
c3d4e5f60718293a4b5c6d7e8f90123456789abcdef0123456789abcdef0123


$ podman inspect env_test --format '{{.Config.Env}}'
[PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin NGINX_VERSION=1.26.1 NJS_VERSION=0.8.6 PKG_RELEASE=1 APP_COLOR=blue APP_MODE=prod]


$ podman inspect env_test --format '{{range .Config.Env}}{{if eq (index (split . "=") 0) "APP_COLOR"}}{{.}}{{end}}{{end}}'
template parsing error: template: inspect:1: function "split" not defined


$ podman inspect env_test --format '{{.Config.Env}}' | tr ' ' '\n' | grep '^APP_COLOR='
APP_COLOR=blue


----------------------------------------
Task 3 - Reviewing Volume Mounts and Ports
----------------------------------------

$ podman run -d --name vol_test -v /tmp:/container_tmp nginx:alpine
d4e5f60718293a4b5c6d7e8f90123456789abcdef0123456789abcdef01234


$ podman inspect vol_test --format '{{.Mounts}}'
[{bind  /tmp /container_tmp  rw rprivate true }]


$ podman inspect my_nginx --format '{{.NetworkSettings.Ports}}'
map[80/tcp:[map[HostIp:0.0.0.0 HostPort:8080]]]


$ podman inspect my_nginx --format '{{(index (index .NetworkSettings.Ports "80/tcp") 0).HostPort}}'
8080


----------------------------------------
Task 4 - Analyzing Container Status and Exit Codes
----------------------------------------

$ podman run --name fail_test alpine sh -c "exit 3"


$ podman inspect fail_test --format '{{.State.ExitCode}}'
3


$ jq --version
-bash: jq: command not found


$ sudo yum install -y jq
Loaded plugins: fastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * base: mirror.centos.org
 * extras: mirror.centos.org
 * updates: mirror.centos.org
Resolving Dependencies
--> Running transaction check
---> Package jq.x86_64 0:1.6-2.el7 will be installed
--> Finished Dependency Resolution

Dependencies Resolved

================================================================================
 Package     Arch        Version            Repository                    Size
================================================================================
Installing:
 jq          x86_64      1.6-2.el7          epel                         167 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 167 k
Installed size: 575 k
Downloading packages:
jq-1.6-2.el7.x86_64.rpm                                     | 167 kB  00:00
Running transaction check
Running transaction test
Transaction test succeeded
Running transaction
  Installing : jq-1.6-2.el7.x86_64                                            1/1
  Verifying  : jq-1.6-2.el7.x86_64                                            1/1

Installed:
  jq.x86_64 0:1.6-2.el7

Complete!


$ podman inspect my_nginx --format '{{json .State}}' | jq
{
  "OciVersion": "1.0.2-dev",
  "Status": "running",
  "Running": true,
  "Paused": false,
  "Restarting": false,
  "OOMKilled": false,
  "Dead": false,
  "Pid": 3552,
  "ExitCode": 0,
  "Error": "",
  "StartedAt": "2026-02-25T08:40:22.012345678Z",
  "FinishedAt": "0001-01-01T00:00:00Z"
}


----------------------------------------
Cleanup
----------------------------------------

$ podman stop my_nginx env_test vol_test
my_nginx
env_test
vol_test


$ podman rm my_nginx env_test vol_test fail_test
my_nginx
env_test
vol_test
fail_test


$ podman rmi nginx:alpine
Untagged: docker.io/library/nginx:alpine
Deleted: a1b2c3d4e5f60718293a4b5c6d7e8f90123456789abcdef0123456789abcdef01


=============================
Lab completed successfully on a cloud lab environment
=============================
