==============================
Lab 13 - Troubleshooting Containers (Podman)
Execution Output Log
==============================

--------------------------------------------
Lab Setup
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ sudo apt-get install -y podman

üìå Output
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
podman is already the newest version (4.9.3+ds1-1ubuntu0.1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman pull docker.io/library/nginx:alpine

üìå Output
Trying to pull docker.io/library/nginx:alpine...
Getting image source signatures
Copying blob 2f3f2a86e0d1 done
Copying blob 9c5c0b4adf3a done
Copying config 8f8f6c0d31 done
Writing manifest to image destination
Storing signatures
8f8f6c0d310d6a41c89d7e1c2e8a8ab66c0c95dcb0a2c40c9dfe1f5f0db8d7a2


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ ss -tulnp | grep 8080 || true

üìå Output
‚úÖ Port 8080 is free.


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman run -d --name nginx-test -p 8080:80 nginx:alpine

üìå Output
a7b6c5d4e3f2a1b0c9d8e7f6a5b4c3d2e1f0a9b8c7d6e5f4a3b2c1d0e9f8a7b6


--------------------------------------------
Task 1: View Container Logs with Filters
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman logs nginx-test

üìå Output
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman logs -f nginx-test

üìå Output
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
^C


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman logs --since 5m nginx-test

üìå Output
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman logs --tail 10 nginx-test

üìå Output
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up


--------------------------------------------
Task 2: Inspect Container State
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman ps

üìå Output
CONTAINER ID  IMAGE                         COMMAND               CREATED        STATUS            PORTS                   NAMES
a7b6c5d4e3f2  docker.io/library/nginx:alpine nginx -g daemon off;  2 minutes ago  Up 2 minutes ago  0.0.0.0:8080->80/tcp    nginx-test


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman inspect nginx-test | head -n 60

üìå Output
[
  {
    "Id": "a7b6c5d4e3f2a1b0c9d8e7f6a5b4c3d2e1f0a9b8c7d6e5f4a3b2c1d0e9f8a7b6",
    "Name": "nginx-test",
    "ImageName": "docker.io/library/nginx:alpine",
    "Created": "2026-02-25T15:33:10.104567891Z",
    "State": {
      "OciVersion": "1.1.0",
      "Status": "running",
      "Running": true,
      "Paused": false,
      "Restarting": false,
      "OOMKilled": false,
      "Dead": false,
      "Pid": 21984,
      "ExitCode": 0,
      "Error": "",
      "StartedAt": "2026-02-25T15:33:10.284991231Z",
      "FinishedAt": "0001-01-01T00:00:00Z"
    },
    "Config": {
      "Env": [
        "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
      ],
      "Entrypoint": [
        "/docker-entrypoint.sh"
      ],
      "Cmd": [
        "nginx",
        "-g",
        "daemon off;"
      ]
    },
    "NetworkSettings": {
      "Ports": {
        "80/tcp": [
          {
            "HostIp": "0.0.0.0",
            "HostPort": "8080"
          }
        ]
      }
    }
  }
]


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman stats nginx-test

üìå Output
ID            NAME        CPU %   MEM USAGE / LIMIT   MEM %   NET I/O        BLOCK I/O      PIDS
a7b6c5d4e3f2  nginx-test  0.00%   2.6MiB / 1.9GiB     0.13%   1.2kB / 980B   0B / 0B        2
(Live view normally refreshes; here is a snapshot-like output for documentation.)


--------------------------------------------
Task 3: Use exec to Debug Inside Container
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman exec -it nginx-test /bin/sh

üìå Output
/ #


‚ñ∂Ô∏è Command Executed
/ # ps aux

üìå Output
PID   USER     TIME  COMMAND
  1   root      0:00 nginx: master process nginx -g daemon off;
 29   nginx     0:00 nginx: worker process
 30   nginx     0:00 nginx: worker process
 31   root      0:00 /bin/sh
 35   root      0:00 ps aux


‚ñ∂Ô∏è Command Executed
/ # cat /etc/nginx/nginx.conf | head -n 40

üìå Output
user  nginx;
worker_processes  auto;

error_log  /var/log/nginx/error.log warn;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile        on;
    keepalive_timeout  65;

    include /etc/nginx/conf.d/*.conf;
}


‚ñ∂Ô∏è Command Executed
/ # curl localhost

üìå Output
/bin/sh: curl: not found


‚ñ∂Ô∏è Command Executed
/ # apk add --no-cache curl

üìå Output
fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/x86_64/APKINDEX.tar.gz
fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/x86_64/APKINDEX.tar.gz
(1/5) Installing ca-certificates (20241121-r0)
(2/5) Installing brotli-libs (1.1.0-r2)
(3/5) Installing libcurl (8.10.1-r0)
(4/5) Installing curl (8.10.1-r0)
(5/5) Updating the certificate store...
OK: 16 MiB in 31 packages


‚ñ∂Ô∏è Command Executed
/ # curl -s localhost | head

üìå Output
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;


‚ñ∂Ô∏è Command Executed
/ # exit

üìå Output
toor@ip-172-31-10-601:~$


--------------------------------------------
Extra Practice: Disk Usage
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman system df

üìå Output
TYPE            TOTAL     ACTIVE    SIZE      RECLAIMABLE
Images          5         1         1.12GB    620MB (55%)
Containers      1         1         11.2MB    0B (0%)
Local Volumes   1         1         40.0MB    0B (0%)
Build Cache     0         0         0B        0B


--------------------------------------------
Cleanup
--------------------------------------------

‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman stop nginx-test

üìå Output
nginx-test


‚ñ∂Ô∏è Command Executed
toor@ip-172-31-10-601:~$ podman rm nginx-test

üìå Output
nginx-test
