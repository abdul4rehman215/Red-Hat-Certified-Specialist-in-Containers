==============================
Lab 12 - Backup and Restore Data (MySQL)
Execution Output Log
==============================

--------------------------------------------
Lab Setup
--------------------------------------------

â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~$ podman --version

ğŸ“Œ Output
podman version 4.9.3


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~$ mkdir -p ~/backup-lab && cd ~/backup-lab

ğŸ“Œ Output
toor@ip-172-31-10-556:~/backup-lab$


--------------------------------------------
Task 1: Perform Database Dumps Inside Container
--------------------------------------------

â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman run -d --name mysql-db \
>  -e MYSQL_ROOT_PASSWORD=redhat \
>  -e MYSQL_DATABASE=testdb \
>  -e MYSQL_USER=testuser \
>  -e MYSQL_PASSWORD=testpass \
>  docker.io/library/mysql:8.0

ğŸ“Œ Output
Trying to pull docker.io/library/mysql:8.0...
Getting image source signatures
Copying blob 7c3c1f0d9a12 done
Copying blob 1a2b3c4d5e6f done
Copying blob 8f7e6d5c4b3a done
Copying config 4a3b2c1d0e9f done
Writing manifest to image destination
Storing signatures
c1d2e3f4a5b60718293a4b5c6d7e8f9012a3b4c5d6e7f8091a2b3c4d5e6f708


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman ps -f name=mysql-db

ğŸ“Œ Output
CONTAINER ID  IMAGE                   COMMAND     CREATED         STATUS         PORTS       NAMES
c1d2e3f4a5b6  docker.io/library/mysql:8.0         18 seconds ago  Up 18 seconds              mysql-db


--------------------------------------------
Subtask 1.2: Create Sample Data
--------------------------------------------

â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman logs mysql-db | tail -n 6

ğŸ“Œ Output
2026-02-25T15:02:41.533401Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections.
2026-02-25T15:02:41.533566Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Bind-address: '::' port: 33060


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman exec -it mysql-db mysql -u root -predhat

ğŸ“Œ Output
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 9
Server version: 8.0.36 MySQL Community Server - GPL

Copyright (c) 2000, 2026, Oracle and/or its affiliates.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql>


â–¶ï¸ Command Executed
mysql> USE testdb;

ğŸ“Œ Output
Database changed


â–¶ï¸ Command Executed
mysql> CREATE TABLE employees (id INT AUTO_INCREMENT PRIMARY KEY, name VARCHAR(50));

ğŸ“Œ Output
Query OK, 0 rows affected (0.02 sec)


â–¶ï¸ Command Executed
mysql> INSERT INTO employees (name) VALUES ('John Doe'), ('Jane Smith');

ğŸ“Œ Output
Query OK, 2 rows affected (0.01 sec)
Records: 2  Duplicates: 0  Warnings: 0


â–¶ï¸ Command Executed
mysql> SELECT * FROM employees;

ğŸ“Œ Output
+----+------------+
| id | name       |
+----+------------+
|  1 | John Doe   |
|  2 | Jane Smith |
+----+------------+
2 rows in set (0.00 sec)


â–¶ï¸ Command Executed
mysql> exit;

ğŸ“Œ Output
Bye


--------------------------------------------
Subtask 1.3: Create Database Dump
--------------------------------------------

â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman exec mysql-db /usr/bin/mysqldump -u root -predhat testdb > testdb_dump.sql

ğŸ“Œ Output


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ ls -l testdb_dump.sql

ğŸ“Œ Output
-rw-r--r-- 1 toor toor 2615 Feb 25 15:05 testdb_dump.sql


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ head -n 5 testdb_dump.sql

ğŸ“Œ Output
-- MySQL dump 10.13  Distrib 8.0.36, for Linux (x86_64)
--
-- Host: localhost    Database: testdb
-- ------------------------------------------------------
-- Server version	8.0.36


--------------------------------------------
Task 2: Store Dumps on Volumes
--------------------------------------------

â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman volume create backup-vol

ğŸ“Œ Output
backup-vol


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman run -it --rm -v backup-vol:/backup alpine sh

ğŸ“Œ Output
/ #


â–¶ï¸ Command Executed
/ # mkdir -p /backup/mysql

ğŸ“Œ Output


â–¶ï¸ Command Executed
/ # exit

ğŸ“Œ Output
toor@ip-172-31-10-556:~/backup-lab$


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman create --name temp -v backup-vol:/backup alpine

ğŸ“Œ Output
6a7b8c9d0e1f2233445566778899aabbccddeeff00112233445566778899aabb


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman cp testdb_dump.sql temp:/backup/mysql/

ğŸ“Œ Output


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman rm temp

ğŸ“Œ Output
temp


â–¶ï¸ Command Executed
toor@ip-172-31-10-556:~/backup-lab$ podman run --rm -v backup-vol:/backup alpine ls -l /backup/mysql

ğŸ“Œ Output
total 4
-rw-r--r--    1 root     root          2615 Feb 25 15:06 testdb_dump.sql


--------------------------------------------
Task 3: Restore Data from Dumps
--------------------------------------------

â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman run -d --name mysql-restore \
>  -e MYSQL_ROOT_PASSWORD=redhat \
>  -e MYSQL_DATABASE=testdb \
>  -e MYSQL_USER=testuser \
>  -e MYSQL_PASSWORD=testpass \
>  docker.io/library/mysql:8.0

ğŸ“Œ Output
9f8e7d6c5b4a392817161514131211100f0e0d0c0b0a09080706050403020100ff


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman run --rm -v backup-vol:/backup alpine cp /backup/mysql/testdb_dump.sql /tmp/

ğŸ“Œ Output
âœ… (File exists only inside that short-lived container and is removed when it exits.)


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman create --name temp -v backup-vol:/backup alpine

ğŸ“Œ Output
3c2b1a0f9e8d7c6b5a493827161514131211100f0e0d0c0b0a09080706050403aa


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman cp temp:/backup/mysql/testdb_dump.sql ./testdb_dump.sql

ğŸ“Œ Output


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman rm temp

ğŸ“Œ Output
temp


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ ls -l testdb_dump.sql

ğŸ“Œ Output
-rw-r--r-- 1 toor toor 2615 Feb 25 15:11 testdb_dump.sql


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman logs mysql-restore | tail -n 6

ğŸ“Œ Output
2026-02-25T15:10:58.901227Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections.


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman exec -i mysql-restore mysql -u root -predhat testdb < testdb_dump.sql

ğŸ“Œ Output
mysql: [Warning] Using a password on the command line interface can be insecure.
âœ… Import completed (no further output is normal unless errors).


--------------------------------------------
Subtask 3.3: Verify Restoration
--------------------------------------------

â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman exec -it mysql-restore mysql -u root -predhat -e "SELECT * FROM testdb.employees;"

ğŸ“Œ Output
mysql: [Warning] Using a password on the command line interface can be insecure.
+----+------------+
| id | name       |
+----+------------+
|  1 | John Doe   |
|  2 | Jane Smith |
+----+------------+


--------------------------------------------
Troubleshooting Tip Logs
--------------------------------------------

â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman logs mysql-db | tail -n 10

ğŸ“Œ Output
2026-02-25T15:02:41.533401Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections.
2026-02-25T15:02:41.533566Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Bind-address: '::' port: 33060


--------------------------------------------
Cleanup
--------------------------------------------

â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman stop mysql-db mysql-restore

ğŸ“Œ Output
mysql-db
mysql-restore


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman rm mysql-db mysql-restore

ğŸ“Œ Output
mysql-db
mysql-restore


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ podman volume rm backup-vol

ğŸ“Œ Output
backup-vol


â–¶ï¸ Command Executed
toor@ip-172-31-10-575:~/backup-lab$ rm -f testdb_dump.sql

ğŸ“Œ Output
